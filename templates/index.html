<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uylar Ro'yxati</title>
<style>
body {
    font-family: Arial, sans-serif;
    padding: 40px;
    transition: background-color 0.3s, color 0.3s;
}

h2 {
    text-align: center;
    margin-bottom: 20px;
}

/* ===== Dark/Light toggle tugma ===== */
.toggle-btn {
    display: block;
    margin: 0 auto 20px;
    padding: 10px 20px;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    border: none;
    background: linear-gradient(145deg,#e0e0e0,#fff);
    box-shadow: 2px 2px 7px #ccc, -2px -2px 7px #fff;
    transition: all 0.2s ease;
}

.toggle-btn:active {
    box-shadow: inset 2px 2px 7px #ccc, inset -2px -2px 7px #fff;
}

.toggle-btn:hover { opacity: 0.9; }

/* ===== Qoâ€˜shish tugmasi ===== */
.add-btn-wrapper {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

.add-btn {
    display: inline-block;
    padding: 10px 16px;
    border-radius: 10px;
    font-weight: bold;
    text-decoration: none;
    background-color: #28a745;
    color: white;
    box-shadow: 2px 2px 7px #ccc, -2px -2px 7px #fff;
    transition: all 0.2s ease;
}

.add-btn:active {
    box-shadow: inset 2px 2px 7px #ccc, inset -2px -2px 7px #fff;
}

.add-btn:hover { background-color: #218838; }

/* ===== Jadval ===== */
table {
    width: 90%;
    margin: auto;
    border-collapse: collapse;
    transition: background-color 0.3s, color 0.3s;
}

th, td {
    padding: 12px 15px;
    text-align: center;
}

th { font-weight: bold; }

tr:nth-child(even) { background-color: #f2f2f2; }
tr:hover { background-color: #e3f2fd; }

.action a {
    margin: 0 6px;
    text-decoration: none;
    font-weight: bold;
}

/* ===== Dark Mode ===== */
body.dark-mode {
    background-color: #121212;
    color: #e0e0e0;
}

body.dark-mode table {
    background-color: #1e1e1e;
    box-shadow: 0 4px 10px rgba(255,255,255,0.05);
}

body.dark-mode th {
    background-color: #bb86fc;
    color: #121212;
}

body.dark-mode tr:nth-child(even) { background-color: #2a2a2a; }
body.dark-mode tr:hover { background-color: #3a3a3a; }

body.dark-mode .add-btn { background-color: #bb86fc; color: #121212; }
body.dark-mode .add-btn:hover { background-color: #9b5de5; }

body.dark-mode .toggle-btn {
    background: linear-gradient(145deg,#333,#444);
    color: #fff;
    box-shadow: 2px 2px 7px #111, -2px -2px 7px #555;
}
</style>
</head>
<body class="light-mode">

<h2>Uylar Ro'yxati</h2>

<button class="toggle-btn" id="toggleMode">Dark mode ðŸŒ™</button>

<div class="add-btn-wrapper">
    <a href="{% url 'create' %}" class="add-btn">+ Uy qoâ€˜shish</a>
</div>

<table>
    <thead>
        <tr>
            <th>#</th>
            <th>Nom</th>
            <th>Narx</th>
            <th>Yaratilgan sana</th>
            <th>Xonalar soni</th>
            <th>Maydon (mÂ²)</th>
            <th>Description</th>
            <th>Amallar</th>
        </tr>
    </thead>
    <tbody>
        {% for house in houses %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{% url 'detail' house.id %}">{{ house.title }}</a></td>
            <td>{{ house.price }}</td>
            <td>{{ house.built_at }}</td>
            <td>{{ house.rooms }}</td>
            <td>{{ house.area }}</td>
            <td>{{ house.desc }}</td>
            <td class="action">
                <a href="{% url 'detail' house.id %}">Koâ€˜rish</a>
                <a href="{% url 'update' house.id %}">Tahrirlash</a>
                <a href="{% url 'delete' house.id %}" onclick="return confirm('Haqiqatan ochirmoqchimisiz?');">Oâ€˜chirish</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="8">Hozircha uylar mavjud emas</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
const toggleBtn = document.getElementById('toggleMode');
const body = document.body;

let savedMode = localStorage.getItem('mode');
if(savedMode === 'dark') {
    body.classList.add('dark-mode');
    toggleBtn.textContent = 'Light Mode â˜€';
} else {
    toggleBtn.textContent = 'Dark mode ðŸŒ™';
}

toggleBtn.addEventListener('click', () => {
    if(body.classList.contains('dark-mode')){
        body.classList.remove('dark-mode');
        localStorage.setItem('mode','light');
        toggleBtn.textContent='Dark mode ðŸŒ™';
    } else {
        body.classList.add('dark-mode');
        localStorage.setItem('mode','dark');
        toggleBtn.textContent='Light Mode â˜€';
    }
});
</script>

</body>
</html>
